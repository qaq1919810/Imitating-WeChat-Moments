<!doctype html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style>
        * {
            font-family: 黑体;
            line-height: 1;
            border: 0;
            padding: 0;
            margin: 0;
            flex-wrap: wrap;
            box-sizing: border-box;
        }
    </style>
    <script>
        let data = [
            {
                userName: "张三",
                userMessage: "哈哈哈今天天气真好",
                sendTime: "一天前"
            },
            {
                userName: "李四",
                userMessage: "哈哈哈今天天气真不好",
                sendTime: "一年前"
            },
            {
                userName: "李四",
                userMessage: "哈哈哈今天天气真不好",
                sendTime: "一年前"
            }
        ]
    </script>
</head>
<body style="background-color: #402b0c">
<div class="main" id="main">
    <script>
        // 定义大盒子长宽
        let mainDiv = document.getElementById('main')
        if (innerWidth > innerHeight) {
            // alert('目前对于桌面端支持度较差建议移动设备使用\n如需桌面端使用建议把浏览器窗口大小调成手机比例然后刷新此页面')
            mainDiv.style.width = `${innerWidth*0.45}px`
        } else {
            mainDiv.style.width = `${innerWidth}px`
        }
        let mw = parseFloat(mainDiv.style.width)

        // 定义各个元素的样式
        let style = document.createElement('style')
        style.textContent = `
            /*小盒子*/
            .basicBlock {
                width: 100%;
                display: flex;
                border-width: 1px 0 1px 0;
                border-style: solid;
                border-color: #e3e3e3;
                padding: ${0.03*mw}px ${0.036*mw}px ${0.04*mw}px ${0.05*mw}px;
            }

            /*左半边*/
            .leftContent {
                width: ${0.1*mw}px;
                height: 100%;
            }

            /*头像*/
            .avatar {
                display: inline-block;
                height: ${0.1*mw}px;
                width: ${0.1*mw}px;
                border-radius: ${0.015*mw}px;
                background-color: skyblue;
            }

            /*右半边*/
            .rightContent {
                margin-left: ${0.03*mw}px;
                height: 100%;
            }

            /*用户名*/
            .userName {
                color: #5b6d95;
                font-size: ${0.04*mw}px;
                margin-top: ${0.0093*mw}px;
            }

            /*用户信息*/
            .userMessage {
                margin-top: ${0.025*mw}px;
                color: #1a1a1a;
                font-size: ${0.04*mw}px;
            }

            /*发送时间*/
            .sendTime {
                font-size: ${0.03*mw}px;
                margin-top: ${0.03*mw}px;
                color: #b1b1b3;
            }

            /*整个大盒子*/
            .main {
                position: absolute;
                left: 50%;
                transform: translateX(-50%);
                background-color: white;
            }
        `
        document.head.appendChild(style)
    </script>

    <script>
        document.addEventListener("DOMContentLoaded", () => {
            for (let i = data.length - 1; i >= 0; --i) {

                document.getElementById('main').innerHTML += `
                    <div class="basicBlock">
                        <div class="leftContent">
                            <div class="avatar"></div>
                        </div>
                        <div class="rightContent">
                            <p class="userName">${data[i].userName}</p>
                            <p class="userMessage">${data[i].userMessage}</p>
                            <p class="sendTime">${data[i].sendTime}</p>
                        </div>
                    </div>
                `
            }
        })
    </script>
</div>
</body>
</html>